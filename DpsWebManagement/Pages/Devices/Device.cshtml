@page
@model DpsWebManagement.Pages.Devices.DeviceModel
@{
    ViewData["Title"] = "Azure IoT Hub Device details";
}

<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-sm-4">
                DPS Device ID
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.Id)
            </div>
        </div>

        <hr />
        <div class="row">
            <div class="col-sm-4">
                Device Name
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.Name)
            </div>
        </div>

        <hr />
        <div class="row">
            <div class="col-sm-4">
                Device DpsEnrollmentGroup
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.DpsEnrollmentGroup)
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-sm-4">
                Password (Only required for PFX)
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.Password)
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-sm-4">
                DeviceId
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.DeviceId)
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-sm-4">
                AssignedHub
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.AssignedHub)
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-sm-4">
                RegistrationId
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.RegistrationId)
            </div>
        </div>

        <hr />

        <div class="row">
            
     
            <div class="col-sm-4">
                <form action="/api/FileDownload/DpsDevicePrivateKeyPem" method="post">
                    <input type="hidden" value="@Model.DpsDevice.Id" id="Id" name="Id" />
                    <button type="submit" style="padding-left:0" class="btn btn-link">Download Private Key PEM</button>
                </form>
            </div>

            <div class="col-sm-4">
                <form action="/api/FileDownload/DpsDevicePublicKeyPem" method="post">
                    <input type="hidden" value="@Model.DpsDevice.Id" id="Id" name="Id" />
                    <button type="submit" style="padding-left:0" class="btn btn-link">Download Public PEM</button>
                </form>
            </div>

            <div class="col-sm-4">
                <form action="/api/FileDownload/DpsDevicePfx" method="post">
                    <input type="hidden" value="@Model.DpsDevice.Id" id="Id" name="Id" />
                    <button type="submit" style="padding-left:0" class="btn btn-link">Download PFX</button>
                </form>
            </div>
        </div>
       
        <hr />

        <div class="row">
            <div class="col-sm-4">
                <form method="post" asp-page-handler="Enable">
                    <input type="hidden" value="@Model.DpsDevice.Id" id="Id" name="Id" />
                    <input type="hidden" value="@Model.DpsDevice.DeviceId" id="DeviceId" name="DeviceId" />
                    <input type="hidden" value="@Model.DpsDevice.AssignedHub" id="AssignedHub" name="AssignedHub" />
                    <button type="submit" class="btn btn-primary" disabled="@(Model.DpsDevice.Enabled ? "disabled" : null)">Enable IoT Hub device</button>
                </form>
            </div>
   
            <div class="col-sm-8">
                <form method="post" asp-page-handler="Disable">
                    <input type="hidden" value="@Model.DpsDevice.Id" id="Id" name="Id" />
                    <input type="hidden" value="@Model.DpsDevice.DeviceId" id="DeviceId" name="DeviceId" />
                    <input type="hidden" value="@Model.DpsDevice.AssignedHub" id="AssignedHub" name="AssignedHub" />
                    <button type="submit" class="btn btn-primary" disabled="@(!Model.DpsDevice.Enabled ? "disabled" : null)">Disable IoT Hub device</button>
                </form>
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-sm-4">
                ConnectionState
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.ConnectionState)
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-sm-4">
                LastActivityTime
            </div>
            <div class="col-sm-8">
                @Html.DisplayFor(modelItem => Model.DpsDevice.LastActivityTime)
            </div>
        </div>

    </div>
</div>
